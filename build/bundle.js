(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function imageDataFromVideo(e,t,n){var a=document.createElement("canvas");a.width=t,a.height=n;var o=a.getContext("2d");try{o.drawImage(e,0,0,t,n)}catch(e){if("NS_ERROR_NOT_AVAILABLE"!=e.name)throw e}return o.getImageData(0,0,t,n)}function getThreshold(){var e=document.getElementById("info_threshold").innerHTML;return Number(e)}function initControls(){document.getElementById("res_in").onchange=function(){var e=this.value,t=64*e,n=48*e,a=document.getElementById("canvas");a.width=t,a.height=n},document.getElementById("res_in").onchange(),document.getElementById("threshold_in").onchange=function(){var e=this.value;document.getElementById("info_threshold").innerHTML=100*e},document.getElementById("threshold_in").onchange()}function sendImageDataToWorker(e,t,n){var a={imageData:imageDataFromVideo(t,e.width,e.height),threshold:getThreshold()};n.postMessage(a)}function main(){var e=document.getElementById("canvas"),t=e.getContext("2d"),n=document.getElementById("video"),a={video:!0};navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia(a,function(t){window.stream=t,window.URL?n.src=window.URL.createObjectURL(t):n.src=t,n.play(),sendImageDataToWorker(e,n,o)},function(e){console.log("Video capture error: ",e.code)});var o=new Worker("w.js");o.addEventListener("message",function(a){t.putImageData(a.data.imageData,0,0),updateFrameRateInfo(a.data.time),sendImageDataToWorker(e,n,o)}),initControls()}var updateFrameRateInfo=function(){var e=document.getElementById("info_frame"),t=document.getElementById("info_fps"),n=new Int32Array(8),a=0,o=0;return function(r){a+=r-n[o],n[o++]=r,8===o&&(o=0),e.innerHTML=Math.round(a/8)+" ms",t.innerHTML=Math.round(8e3/a)}}();main();

},{}]},{},[1]);
